:root { --primary: #0066cc; --bg: #f4f7f9; --white: #ffffff; --text: #333; --success: #28a745; --danger: #dc3545; --supply: #0066cc; --extract: #d63384; --machine-bg: linear-gradient(135deg, #444 0%, #222 100%); }

body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding-bottom: 80px; }


.header { background-color: var(--primary); color: var(--white); padding: 15px; position: sticky; top: 0; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

.back-btn { background: none; border: none; color: white; font-size: 24px; cursor: pointer; padding: 0 10px 0 0; }


.view { display: none; padding: 15px; animation: fadeIn 0.2s; }

.view.active { display: block; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }


.card { background: var(--white); border-radius: 12px; padding: 20px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }


.list-item { background: var(--white); padding: 15px; border-radius: 8px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border-left: 5px solid #ccc; box-shadow: 0 1px 3px rgba(0,0,0,0.05); cursor: pointer; }

.list-action-btn { background: none; border: none; font-size: 18px; color: #ccc; cursor: pointer; padding: 0 8px; }

.list-delete-btn:hover { color: var(--danger); }

.list-copy-btn:hover { color: var(--primary); }



input, select { width: 100%; padding: 12px; margin: 5px 0 15px 0; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; }

label { font-weight: 600; font-size: 13px; color: #555; }

.btn { width: 100%; padding: 14px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; margin-top: 10px; cursor: pointer; color: white; transition: 0.2s; }

.btn:active { transform: scale(0.98); }

.btn-primary { background-color: var(--primary); }

.btn-success { background-color: var(--success); }

.btn-secondary { background-color: #e2e6ea; color: #333; }

.btn-danger { background-color: var(--danger); margin-top: 20px; }

.btn-demo { background-color: #6f42c1; color: white; margin-top: 20px; font-size: 14px; }

.btn-optimize { background: linear-gradient(45deg, #28a745, #218838); color: white; margin-top: 10px; border:none; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3); }


.fab { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: var(--primary); color: white; border-radius: 50%; font-size: 30px; border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 2000; }



.mode-selector { display: flex; gap: 5px; margin-bottom: 15px; }

.mode-btn { flex: 1; padding: 10px; border: 1px solid #ccc; background: #f0f0f0; cursor: pointer; border-radius: 8px; font-weight: bold; text-align: center; }

.mode-btn.active { background: var(--primary); color: white; border-color: var(--primary); }


.copy-controls { display: flex; gap: 5px; margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px; }

.copy-btn { font-size: 11px; padding: 5px; flex: 1; background: #f8f9fa; border: 1px solid #ddd; cursor: pointer; border-radius: 4px; }



#view-visual { overflow-x: auto; overflow-y: hidden; min-height: 85vh; background: #fdfdfd; background-size: cover; background-position: center; background-repeat: no-repeat; }

.schematic-container { position: relative; min-width: 1000px; min-height: 800px; padding: 40px 20px; display: flex; }

#pipeCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }



.machine-unit { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); width: 105px; height: 150px; background: var(--machine-bg); color: white; border: 3px solid #555; border-radius: 2px; z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; font-size: 11px; box-shadow: 4px 4px 12px rgba(0,0,0,0.3); cursor: pointer; }

.machine-port { position: absolute; width: 14px; height: 14px; background: #999; border: 2px solid #333; z-index: 11; cursor: pointer; }

.p-sup-1 { top: -8px; left: 20%; background: #b3d9ff; } .p-sup-2 { top: -8px; left: 70%; background: #b3d9ff; }

.p-ext-1 { bottom: -8px; left: 20%; background: #ffccd5; } .p-ext-2 { bottom: -8px; left: 70%; background: #ffccd5; }

.p-side-sup { top: 25%; right: -8px; background: #b3d9ff; } .p-side-ext { bottom: 25%; right: -8px; background: #ffccd5; }



.duct-lanes-wrapper { margin-left: 200px; display: flex; flex-direction: column; justify-content: center; gap: 60px; width: 100%; }

.duct-lane { position: relative; display: flex; align-items: center; min-height: 60px; padding-left: 40px; }

.duct-lane-pipe { position: absolute; left: 0; right: 20px; top: 50%; height: 6px; z-index: 0; }

.lane-supply .duct-lane-pipe { background-color: var(--supply); } .lane-extract .duct-lane-pipe { background-color: var(--extract); }

.lane-title { position: absolute; left: 0; top: -35px; font-weight: bold; font-size: 12px; color: #555; background: rgba(255,255,255,0.9); padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; display:flex; gap:10px; align-items:center; cursor: pointer; }

.del-lane-btn { color: #ccc; cursor: pointer; margin-left: 5px; } .del-lane-btn:hover { color: red; }

.velocity-badge { padding: 2px 5px; border-radius: 4px; font-size: 10px; color: white; }

.v-green { background: #28a745; } .v-yellow { background: #ffc107; color: #333; } .v-red { background: #dc3545; font-weight: bold; animation: pulse 2s infinite; }

@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }



.valve-node { position: relative; background: white; border: 2px solid #ccc; border-radius: 6px; padding: 5px 8px; margin-right: 30px; z-index: 2; cursor: pointer; min-width: 80px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: 0.2s; }

.valve-node:hover { transform: scale(1.05); border-color: #666; }

.status-ok { border-color: var(--success); background: #e6fffa; border-width: 2px; }

.status-bad { border-color: #f1c40f; background: #fff9db; border-width: 2px; }

.status-worst { border-color: var(--danger); background: #fff0f0; border-width: 3px; font-weight: bold; }

.valve-node::before { content: ''; position: absolute; left: 50%; bottom: -10px; height: 10px; width: 2px; background: #ccc; z-index: -1; }


.add-valve-btn { background: white; border: 2px dashed #ccc; color: #ccc; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; z-index: 2; margin-left: 10px; }

.add-valve-btn:hover { border-color: var(--primary); color: var(--primary); }



.result-box { background: #e8f4fd; padding: 15px; border-radius: 8px; margin-top: 15px; text-align: center; }

.big-number { font-size: 28px; font-weight: bold; color: var(--primary); }


table.report { width: 100%; border-collapse: collapse; margin-top: 10px; }

table.report th, table.report td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 14px; }

table.report th { background: #f0f0f0; }

.report-meta { border: 1px solid #ccc; padding: 10px; margin-bottom: 20px; background: #fff; }

.chk-row { display: flex; align-items: center; margin-bottom: 10px; }

.chk-row input { width: auto; margin-right: 10px; }


#liveKValue { font-size: 13px; color: var(--primary); font-weight: bold; text-align: right; margin-top: -10px; margin-bottom: 15px; height: 20px; }

.advice-text { font-weight: bold; color: #d35400; margin-top: 5px; }

.photo-preview { max-width: 100%; height: auto; margin-top: 10px; border-radius: 8px; display: none; }

.fan-calc-box { border-top: 1px solid #ccc; margin-top: 20px; padding-top: 10px; }

.fan-calc-row { display: flex; gap: 10px; margin-bottom: 5px; }



/* UUDET TYYLIT: TASAPAINOTUS & ALLEKIRJOITUS */

.balance-card { background: #f8f9fa; border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-bottom: 10px; }

.balance-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 14px; }

.balance-alert { padding: 10px; border-radius: 6px; color: white; font-weight: bold; text-align: center; margin-top: 10px; }

.bg-ok { background-color: var(--success); }

.bg-warn { background-color: #fd7e14; }

.bg-err { background-color: var(--danger); }


.signature-wrapper { border: 2px dashed #ccc; background: #fff; height: 150px; position: relative; margin-top: 10px; touch-action: none; }

#signaturePad { width: 100%; height: 100%; cursor: crosshair; }

.clear-sig-btn { position: absolute; top: 5px; right: 5px; font-size: 12px; background: #eee; border: 1px solid #ccc; padding: 2px 5px; cursor: pointer; }

#reportLogoImg { max-height: 50px; max-width: 150px; display: none; margin-bottom: 10px; }
/* PROJEKTIN LUONTI-IKKUNA */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 3000; }
        .modal-box { background: white; padding: 20px; border-radius: 12px; width: 85%; max-width: 350px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .modal-box h3 { margin-top: 0; }